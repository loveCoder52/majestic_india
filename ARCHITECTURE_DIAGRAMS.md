# ğŸ“Š Frontend-Backend Architecture Diagram

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           INTERNET / BROWSER                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ HTTP/HTTPS
                                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                       â”‚
        â”‚                                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND              â”‚                            â”‚   BACKEND              â”‚
â”‚  http://localhost:5173  â”‚                            â”‚  http://localhost:3000 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚                            â”‚                       â”‚
â”‚  React App (Vite)       â”‚    API Requests (fetch)    â”‚  Express.js Server    â”‚
â”‚  â”œâ”€â”€ Components         â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>      â”‚  â”œâ”€â”€ Routes           â”‚
â”‚  â”œâ”€â”€ Pages              â”‚                            â”‚  â”œâ”€â”€ Controllers      â”‚
â”‚  â”œâ”€â”€ Context API        â”‚    API Responses (JSON)    â”‚  â”œâ”€â”€ Middleware       â”‚
â”‚  â””â”€â”€ Services           â”‚    <â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”‚  â””â”€â”€ Models           â”‚
â”‚                         â”‚                            â”‚                       â”‚
â”‚  .env.local:            â”‚                            â”‚  .env:                â”‚
â”‚  VITE_API_BASE_URL:     â”‚   CORS Validation          â”‚  CORS_ORIGIN:         â”‚
â”‚  http://localhost:3000/ â”‚   (credentials: include)   â”‚  http://localhost:5173â”‚
â”‚  api/v1                 â”‚                            â”‚                       â”‚
â”‚                         â”‚                            â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                â”‚
                                                                â”‚ Database Driver
                                                                â”‚ (mongoose)
                                                                â”‚
                                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                    â”‚  MongoDB (Atlas)        â”‚
                                                    â”‚                         â”‚
                                                    â”‚  Collections:           â”‚
                                                    â”‚  â”œâ”€â”€ users              â”‚
                                                    â”‚  â””â”€â”€ other entities     â”‚
                                                    â”‚                         â”‚
                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Diagram

### 1. User Registration

```
React Component
       â”‚
       â”‚ 1. User fills form & clicks Register
       â”‚
       â–¼
AuthContext (useAuth hook)
       â”‚
       â”‚ 2. Call register(name, email, password, phone)
       â”‚
       â–¼
authService.registerUser()
       â”‚
       â”‚ 3. POST /api/v1/users/register
       â”‚    + headers: Content-Type: application/json
       â”‚    + credentials: include (for cookies)
       â”‚    + body: {fullName, email, password, phone}
       â”‚
       â–¼
Express Backend
       â”‚
       â”‚ 4. User Controller:
       â”‚    - Validate input
       â”‚    - Hash password with bcrypt
       â”‚    - Create user in MongoDB
       â”‚    - Generate JWT tokens
       â”‚    - Set cookies (httpOnly)
       â”‚
       â–¼
MongoDB
       â”‚
       â”‚ 5. Save user document
       â”‚
       â–¼
Express Backend
       â”‚
       â”‚ 6. Return response:
       â”‚    {
       â”‚      statusCode: 201,
       â”‚      success: true,
       â”‚      data: {user object},
       â”‚      message: "User registered successfully"
       â”‚    }
       â”‚    + Set-Cookie headers (accessToken, refreshToken)
       â”‚
       â–¼
Browser
       â”‚
       â”‚ 7. Receive response
       â”‚    Auto-store cookies
       â”‚
       â–¼
AuthContext
       â”‚
       â”‚ 8. Update user state
       â”‚    setUser(response.data)
       â”‚
       â–¼
React Component
       â”‚
       â”‚ 9. Show success message
       â”‚    & Redirect to dashboard
       â”‚
```

### 2. User Login

```
React Component (LoginForm)
       â”‚
       â”‚ 1. User enters email/password
       â”‚
       â–¼
authService.loginUser(email, password)
       â”‚
       â”‚ 2. POST /api/v1/users/login
       â”‚    + credentials: include (sends any existing cookies)
       â”‚    + body: {email, password}
       â”‚
       â–¼
Express Backend (User Controller)
       â”‚
       â”‚ 3. Find user by email
       â”‚    Verify password with bcrypt
       â”‚
       â–¼
MongoDB
       â”‚
       â”‚ 4. Return user document
       â”‚
       â–¼
Express Backend
       â”‚
       â”‚ 5. Generate new tokens
       â”‚    Set cookies
       â”‚
       â–¼
Browser
       â”‚
       â”‚ 6. Auto-store JWT tokens in cookies
       â”‚
       â–¼
React App
       â”‚
       â”‚ 7. Update AuthContext
       â”‚    User now available via useAuth()
       â”‚
```

### 3. Protected API Call (with JWT)

```
React Component
       â”‚
       â”‚ 1. Request: getCurrentUser()
       â”‚
       â–¼
authService.getCurrentUser()
       â”‚
       â”‚ 2. GET /api/v1/users/me
       â”‚    + credentials: include
       â”‚    â†“ Browser auto-adds cookies â†“
       â”‚    Cookie: accessToken=eyJ...
       â”‚
       â–¼
Express Backend (verifyJWT middleware)
       â”‚
       â”‚ 3. Extract token from cookie
       â”‚    Verify JWT signature
       â”‚    Decode token to get user ID
       â”‚
       â–¼
JWT Verification
       â”‚
       â”œâ”€ Valid? â†’ Continue
       â”‚
       â””â”€ Invalid? â†’ Return 401 Unauthorized
       â”‚
       â–¼
User Controller
       â”‚
       â”‚ 4. Find user by ID from token
       â”‚
       â–¼
MongoDB
       â”‚
       â”‚ 5. Return user document
       â”‚
       â–¼
Express Backend
       â”‚
       â”‚ 6. Send user data to frontend
       â”‚
       â–¼
Browser / React
       â”‚
       â”‚ 7. Update AuthContext with user data
       â”‚
```

---

## Component Interaction Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            App.jsx                                        â”‚
â”‚                    (Wrapped by AuthProvider)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   AuthContext.jsx         â”‚    â”‚   Header.jsx              â”‚
    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”‚    â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
    â”‚   Provides:               â”‚    â”‚   Uses:                   â”‚
    â”‚   â”œâ”€â”€ user                â”‚    â”‚   â”œâ”€â”€ useAuth()           â”‚
    â”‚   â”œâ”€â”€ isAuthenticated     â”‚    â”‚   â””â”€â”€ Shows login btn     â”‚
    â”‚   â”œâ”€â”€ login()             â”‚    â”‚      or user name         â”‚
    â”‚   â”œâ”€â”€ register()          â”‚    â”‚                           â”‚
    â”‚   â””â”€â”€ logout()            â”‚    â”‚                           â”‚
    â”‚                           â”‚    â”‚                           â”‚
    â”‚   State on load:          â”‚    â”‚                           â”‚
    â”‚   â†’ Calls getCurrentUser()â”‚    â”‚                           â”‚
    â”‚   â†’ Fetches from backend  â”‚    â”‚                           â”‚
    â”‚   â†’ Updates user state    â”‚    â”‚                           â”‚
    â”‚                           â”‚    â”‚                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”‚ Provides useAuth hook
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚   LoginForm.jsx        â”‚     â”‚  RegisterForm.jsx       â”‚ â”‚
    â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚     â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
    â”‚  â”‚   Uses:                â”‚     â”‚  Uses:                  â”‚ â”‚
    â”‚  â”‚   â”œâ”€â”€ useAuth()        â”‚     â”‚  â”œâ”€â”€ useAuth()          â”‚ â”‚
    â”‚  â”‚   â”œâ”€â”€ login()          â”‚     â”‚  â””â”€â”€ register()         â”‚ â”‚
    â”‚  â”‚   â””â”€â”€ isLoading        â”‚     â”‚                         â”‚ â”‚
    â”‚  â”‚                        â”‚     â”‚                         â”‚ â”‚
    â”‚  â”‚   Calls:              â”‚     â”‚  Calls:                â”‚ â”‚
    â”‚  â”‚   POST /users/login   â”‚     â”‚  POST /users/register  â”‚ â”‚
    â”‚  â”‚                        â”‚     â”‚                         â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                                               â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚   Contact/Other Pages                                   â”‚ â”‚
    â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚ â”‚
    â”‚  â”‚   Uses:                                                  â”‚ â”‚
    â”‚  â”‚   â”œâ”€â”€ useAuth() to check if logged in                   â”‚ â”‚
    â”‚  â”‚   â”œâ”€â”€ Display user info if authenticated                â”‚ â”‚
    â”‚  â”‚   â””â”€â”€ Show login prompt if not                          â”‚ â”‚
    â”‚  â”‚                                                          â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Endpoint Structure

```
Backend: http://localhost:3000
         â””â”€â”€ /test (Health check, no auth needed)
         â””â”€â”€ /api/v1/
             â””â”€â”€ /users (User routes)
                 â”œâ”€â”€ POST /register (No auth needed)
                 â”‚   â””â”€> Creates new user
                 â”‚       Sets JWT cookies
                 â”‚       Returns user object
                 â”‚
                 â”œâ”€â”€ POST /login (No auth needed)
                 â”‚   â””â”€> Validates email/password
                 â”‚       Sets JWT cookies
                 â”‚       Returns user object
                 â”‚
                 â”œâ”€â”€ POST /logout (Auth required)
                 â”‚   â””â”€> Clears refresh token
                 â”‚       Clears cookies
                 â”‚       Returns success message
                 â”‚
                 â””â”€â”€ GET /me (Auth required)
                     â””â”€> Returns current logged-in user
                         Requires valid JWT in cookies
```

---

## Request/Response Cycle with CORS

```
â”Œâ”€ FRONTEND (localhost:5173) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                          â”‚
â”‚  1. fetch('http://localhost:3000/api/v1/users/login', {               â”‚
â”‚       method: 'POST',                                                  â”‚
â”‚       credentials: 'include',  â—„â”€â”€â”€ IMPORTANT!                         â”‚
â”‚       ...                                                              â”‚
â”‚     })                                                                 â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ HTTP Request Headers:
                               â”‚ Origin: http://localhost:5173
                               â”‚ Content-Type: application/json
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BACKEND (localhost:3000) - CORS Middleware                              â”‚
â”‚                                                                          â”‚
â”‚  1. Check Origin header                                                â”‚
â”‚  2. Is http://localhost:5173 in CORS_ORIGIN? â†’ YES âœ“                  â”‚
â”‚  3. Set CORS response headers:                                         â”‚
â”‚     â”œâ”€â”€ Access-Control-Allow-Origin: http://localhost:5173            â”‚
â”‚     â”œâ”€â”€ Access-Control-Allow-Credentials: true                        â”‚
â”‚     â””â”€â”€ Access-Control-Allow-Methods: GET, POST, PUT, DELETE          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ Route Handler
                               â”‚ (User Controller)
                               â”‚
                               â”‚ Process request
                               â”‚ Authenticate user
                               â”‚ Return response + Set-Cookie header
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BROWSER (localhost:5173)                                                â”‚
â”‚                                                                          â”‚
â”‚  1. Receive response with CORS headers                                 â”‚
â”‚  2. CORS check passed âœ“                                                â”‚
â”‚  3. Receive Set-Cookie header                                          â”‚
â”‚  4. Auto-store cookies (because credentials: 'include')               â”‚
â”‚  5. JavaScript code gets response data                                â”‚
â”‚  6. Update UI                                                          â”‚
â”‚                                                                          â”‚
â”‚  Subsequent requests:                                                  â”‚
â”‚  All fetch calls with credentials: 'include'                          â”‚
â”‚  Will automatically send stored cookies                                â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Error Handling Flow

```
â”Œâ”€ Frontend Makes Request â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                        â”‚
â”‚  authService.loginUser({email, password})                           â”‚
â”‚                                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                 â”‚
  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
  â”‚ Network    â”‚                 â”‚ Backend      â”‚
  â”‚ Error?     â”‚                 â”‚ Returns      â”‚
  â”‚            â”‚                 â”‚ Error?       â”‚
  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                 â”‚
    âŒ  â”‚                                 â”‚ âœ…
        â”‚                                 â”‚
    No internet?                    {
    Connection refused?              statusCode: 401,
    Timeout?                         success: false,
                                     message: "Invalid email or password"
                                     }
        â”‚                                 â”‚
        â”‚                                 â”‚
  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  catch(error) {                                   â”‚
  â”‚    console.error(error.message)                  â”‚
  â”‚    setError('Login failed')                      â”‚
  â”‚  }                                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ Update UI with error message
        â”‚
  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  User sees error in red text   â”‚
  â”‚  "âŒ Login failed"              â”‚
  â”‚  Can retry login               â”‚
  â”‚                                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## File Structure Overview

```
Majestic_India/
â”œâ”€â”€ FRONTEND_BACKEND_GUIDE.md           (Complete guide)
â”œâ”€â”€ QUICK_REFERENCE.md                  (Quick copy-paste code)
â”œâ”€â”€ SETUP_SUMMARY.md                    (What was done)
â”œâ”€â”€ PRODUCTION_CHECKLIST.md             (Before deploying)
â”‚
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.js                    (Entry point)
â”‚   â”‚   â”œâ”€â”€ app.js                      (CORS configured here)
â”‚   â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”‚   â””â”€â”€ index.js                (MongoDB connection)
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â””â”€â”€ user.controller.js      (Login, register logic)
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â””â”€â”€ user.router.js          (API routes)
â”‚   â”‚   â”œâ”€â”€ middlewears/
â”‚   â”‚   â”‚   â””â”€â”€ auth.middleware.js      (JWT verification)
â”‚   â”‚   â””â”€â”€ models/
â”‚   â”‚       â””â”€â”€ user.model.js           (MongoDB schema)
â”‚   â””â”€â”€ .env                             (Config: MONGO_URI, CORS_ORIGIN)
â”‚
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx                     (Wrapped with AuthProvider)
â”‚   â”‚   â”œâ”€â”€ main.jsx                    (Entry point)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ authService.js          (API call functions)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â”‚   â””â”€â”€ AuthContext.jsx         (Global auth state)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ apiConfig.js            (API base URL)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginForm.jsx           (Login form example)
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterForm.jsx        (Register form example)
â”‚   â”‚   â”‚   â””â”€â”€ Header.jsx              (Show user or login btn)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ Pages/
â”‚   â”‚       â”œâ”€â”€ ConnectionTest.jsx      (Connection tester)
â”‚   â”‚       â”œâ”€â”€ ContactExample.jsx      (Real-world example)
â”‚   â”‚       â””â”€â”€ (Other pages)
â”‚   â”‚
â”‚   â””â”€â”€ .env.local                       (Config: VITE_API_BASE_URL)
```

---

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User Action                                  â”‚
â”‚                         (Submit Form)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 1: CORS Check (Frontend -> Backend origin validation)       â”‚
â”‚  âœ“ Only allow http://localhost:5173                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 2: Input Validation (Check data format & required fields)   â”‚
â”‚  âœ“ Email is valid email format                                     â”‚
â”‚  âœ“ Password is not empty                                           â”‚
â”‚  âœ“ Required fields present                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: Database Check (Is email already registered?)            â”‚
â”‚  âœ“ Check if user exists                                            â”‚
â”‚  âœ“ Prevent duplicate accounts                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 4: Password Security (Hash with bcrypt)                     â”‚
â”‚  âœ“ Never store plain passwords                                     â”‚
â”‚  âœ“ Use bcrypt (salted hash)                                        â”‚
â”‚  âœ“ One-way encryption                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 5: JWT Token Generation (Secure token creation)             â”‚
â”‚  âœ“ Use strong secret key                                           â”‚
â”‚  âœ“ Set expiration time                                             â”‚
â”‚  âœ“ Include user ID in token                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 6: Secure Cookie Storage (httpOnly, Secure, SameSite)      â”‚
â”‚  âœ“ httpOnly: Can't be accessed by JavaScript (XSS safe)           â”‚
â”‚  âœ“ Secure: Only sent over HTTPS in production                     â”‚
â”‚  âœ“ SameSite=Strict: Only sent to same origin (CSRF safe)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Logged In & Protected âœ“                                      â”‚
â”‚  All subsequent requests authenticated with JWT                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This architecture is production-ready and follows industry best practices! ğŸš€**
